<div class="d-flex justify-content-center">
    <mat-card class='w-75 mt-3'>
        <mat-card-content>

            <!-- NAME  -->

            <div class="d-flex justify-content-between align-items-center">
                <h3 class="text-h1">{{client.contact}}</h3>

                <!-- ACTIONS MENU  -->

                <mat-menu #clientActionsMenu="matMenu">
                    <button mat-menu-item>
                        <mat-icon>edit</mat-icon>
                        <span>Edit client</span>
                    </button>
                    <button mat-menu-item>
                        <mat-icon>delete</mat-icon>
                        <span>Delete client</span>
                    </button>

                   
                    <button mat-menu-item (click)="onAddEnvClick()">
                        <mat-icon>add_box</mat-icon>
                        <span>Add Environment</span>
                    </button>

                    <!-- LAUNCH LOGIN DIALOG -->
                    <!-- <button mat-menu-item matTooltip="launch login dialog asking for podio emaili and pwd">
                        <mat-icon>library_add</mat-icon>
                        <span>Add New Env w/ Podio credentials</span>
                    </button> -->

                    <!-- <button mat-menu-item [matMenuTriggerFor]="addEnv">Add Environment</button> -->
                </mat-menu>
                <button mat-raised-button [matMenuTriggerFor]="clientActionsMenu">
                    Actions
                    <mat-icon>keyboard_arrow_down</mat-icon>
                
                </button>

                <!-- <mat-menu #addEnv="matMenu">
                    <button mat-menu-item>Add from available Saasafras environments</button>
                    <button mat-menu-item>Add a new environment using a Podio username and password</button>
                </mat-menu> -->

            </div>

            <!-- INFO  -->

            <mat-list>
                <h3>Information</h3>
                <mat-list-item>
                    <mat-icon mat-list-icon>person_outline</mat-icon>
                    <p mat-line> {{client.contact}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>store_mall_directory</mat-icon>
                    <p mat-line> {{client.company}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>credit_card</mat-icon>
                    <p mat-line> {{client.id}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>email</mat-icon>
                    <p mat-line> {{client.email}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>note</mat-icon>
                    <p mat-line> {{client.notes}} </p>
                </mat-list-item>

                <mat-divider></mat-divider>

                <h3>Environments</h3>

                <!-- ENVIRONMENTS  -->
                <!-- TODO THIS COULD BE A COMPONENT  -->

                <div>
                    <div class="d-flex justify-content-between align-items-center">
                        <!-- FILTER -->
                        <mat-form-field class="w-50">
                            <mat-icon matPrefix>search</mat-icon>
                            <input matInput (keyup)="applyFilter($event.target.value)"
                                placeholder="Search environments..." />
                        </mat-form-field>

                        <!-- ADD NEW  -->
                        <span class="button-row">
                            <mat-menu #addEnvMenu="matMenu">

                                <button mat-menu-item>
                                    <mat-icon>add_box</mat-icon>
                                    <span>Add Environment from Available Environments</span>
                                </button>
                                <button mat-menu-item>
                                    <mat-icon>library_add</mat-icon>
                                    <span>Add New Environment using Podio credentials</span>
                                </button>

                                <!-- <button mat-menu-item [matMenuTriggerFor]="addEnv">Add Environment</button> -->
                            </mat-menu>

                            <!-- <button mat-button [matMenuTriggerFor]="addEnvMenu">Actions</button> -->
                            <!-- <button routerLink="/clients/new" mat-raised-button>Add Environment</button> -->
                        </span>
                    </div>

                    <!-- TABLE  -->
                    <div class="table-container mat-elevation-z4">
                        <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>

                            <!-- COLUMNS -->
                            <ng-container matColumnDef="org">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Podio Org.
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.name }}
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <ng-container matColumnDef="owner">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Org. Owner
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.owner }}
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <ng-container matColumnDef="solution">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Deployed Solution
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    <a routerLink="/solutions/1">mPactAmateur</a>
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <ng-container matColumnDef="actions">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Actions
                                </th>
                                <td mat-cell *matCellDef="let element">

                                    <!-- TODO THIS COULD BE A COMPONENT  -->
                                    <mat-menu #envActions="matMenu">
                                        <!-- <button mat-menu-item>
                                            <mat-icon>settings</mat-icon>
                                            <span>Manage solution</span>
                                        </button> -->
                                        <button mat-menu-item>
                                            <mat-icon>history</mat-icon>
                                            <span>Environment history</span>
                                        </button>
                                        <button mat-menu-item>
                                            <mat-icon>settings</mat-icon>
                                            <span>Patch environment</span>
                                        </button>
                                        <button mat-menu-item>
                                            <mat-icon>vpn_key</mat-icon>
                                            <span>Pause client access</span>
                                        </button>
                                        <button mat-menu-item>
                                            <mat-icon>remove_circle_outline</mat-icon>
                                            <span>Remove Env from Client</span>
                                        </button>
                                        <button mat-menu-item>
                                            <mat-icon>delete</mat-icon>
                                            <span>Delete from SF</span>
                                        </button>
                                    </mat-menu>
                                    <button mat-button [matMenuTriggerFor]="envActions">
                                        <mat-icon>more_vert</mat-icon>
                                    </button>

                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <!-- ROWS -->
                            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"
                                class="md-elevation-z5"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                            <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
                        </table>
                    </div>

                </div>

                <!-- 
                <mat-list-item *ngFor="let env of client.environments">

                    <div class="w-100 d-flex justify-content-between align-items-center">
                        <img src="https://cdn.iconscout.com/icon/free/png-256/podio-282956.png" alt=""
                            class="exp-panel-icon">
                        <p>Org: {{env.name}} </p>
                        <p>Org. Owner: {{env.owner}}</p>
                        <p>Deployed Solution(s): mPactPro</p>

                      

                        

                    </div>

                </mat-list-item> -->

            </mat-list>

        </mat-card-content>
    </mat-card>

</div>