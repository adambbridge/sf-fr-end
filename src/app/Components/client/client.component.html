<div class="d-flex justify-content-center">
    <mat-card class='w-100 mt-3'>
        <mat-card-content>

            <!-- NAME  -->

            <div class="d-flex justify-content-between align-items-center">
                <h3 class="text-h1">{{client.contact}}</h3>

                <span>
                    <!-- TODO FOR A/B TESTING ONLY. REMOVE... -->
                    <mat-menu #envUIOptions="matMenu">
                        <button mat-menu-item (click)="envUI = 'oneTable'">
                            <span>one table</span>
                        </button>
                        <button mat-menu-item (click)="envUI = 'twoAccordions'">
                            <span>two accordions</span>
                        </button>
                    </mat-menu>
                    <button mat-raised-button [matMenuTriggerFor]="envUIOptions" class="mr-2">
                        <span>env UI options</span>
                    </button>

                    <mat-menu #clientActionsMenu="matMenu">
                        <button mat-menu-item>
                            <mat-icon>edit</mat-icon>
                            <span>Edit client</span>
                        </button>
                        <button mat-menu-item>
                            <mat-icon>delete</mat-icon>
                            <span>Delete client</span>
                        </button>
                    </mat-menu>
                    <button mat-raised-button [matMenuTriggerFor]="clientActionsMenu">
                        <!-- Edit
                    <mat-icon>keyboard_arrow_down</mat-icon> -->
                        <mat-icon>settings</mat-icon>
                    </button>

                </span>

            </div>

            <!-- INFO  -->

            <mat-list>
                <h3>Information</h3>
                <mat-list-item>
                    <mat-icon mat-list-icon>person_outline</mat-icon>
                    <p mat-line> {{client.contact}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>store_mall_directory</mat-icon>
                    <p mat-line> {{client.company}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>credit_card</mat-icon>
                    <p mat-line> {{client.id}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>email</mat-icon>
                    <p mat-line> {{client.email}} </p>
                </mat-list-item>

                <mat-list-item>
                    <mat-icon mat-list-icon>note</mat-icon>
                    <p mat-line> {{client.notes}} </p>
                </mat-list-item>

                <mat-divider></mat-divider>

                <!--============================
                    ORGS AND INSTANCES TABLE
                =========================================== -->

                <div *ngIf="envUI === 'oneTable'">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3>Podio Organizations & Deployed Solution Instances</h3>

                        <!-- ACTION BTN AND MENU  -->
                        <mat-menu #OrgAndInstanceMenu="matMenu">
                            <button mat-menu-item (click)="onAddEnvClick()">
                                <mat-icon>add_box</mat-icon>
                                <span>Add Podio Organization</span>
                            </button>
                            <button mat-menu-item>
                                <mat-icon>fiber_new</mat-icon>
                                <span>Create New Solution Instance</span>
                            </button>
                        </mat-menu>

                        <button mat-raised-button [matMenuTriggerFor]="OrgAndInstanceMenu">
                            <mat-icon>add_box</mat-icon>
                        </button>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between align-items-center">

                            <!-- FILTER -->
                            <mat-form-field class="w-50">
                                <mat-icon matPrefix>search</mat-icon>
                                <input matInput (keyup)="applyFilter($event.target.value)"
                                    placeholder="Search by keyword..." />
                            </mat-form-field>

                        </div>

                        <!-- TABLE  -->
                        <div class="table-container mat-elevation-z4">
                            <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>

                                <ng-container matColumnDef="org">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                        Podio Org.
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        {{ element.name }}
                                    </td>
                                    <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>

                                <ng-container matColumnDef="owner">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                        Org. Owner
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        {{ element.owner }}
                                    </td>
                                    <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>

                                <ng-container matColumnDef="solution">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                        Deployed Solution Instance
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="!element.isTemplate">
                                            <a routerLink="/solutions/1">
                                                mPactPro - BBC
                                            </a>
                                        </span>
                                    </td>
                                    <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>

                                <ng-container matColumnDef="isTemplate">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                        Is Template
                                    </th>
                                    <td mat-cell *matCellDef="let element">
                                        <span *ngIf="element.isTemplate">true</span>
                                    </td>
                                    <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>

                                <ng-container matColumnDef="actions">
                                    <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                        Actions
                                    </th>
                                    <td mat-cell *matCellDef="let element">

                                        <!-- ACTION MENU FOR EACH TABLE ROW -->
                                        <mat-menu #envActions="matMenu">
                                            <button mat-menu-item *ngIf="!element.isTemplate">
                                                <mat-icon>history</mat-icon>
                                                <span>Instance history</span>
                                            </button>
                                            <button mat-menu-item *ngIf="!element.isTemplate">
                                                <mat-icon>edit</mat-icon>
                                                <span>Edit Instance</span>
                                            </button>
                                            <button mat-menu-item *ngIf="!element.isTemplate">
                                                <mat-icon>settings</mat-icon>
                                                <span>Patch Instance</span>
                                            </button>
                                            <button mat-menu-item>
                                                <mat-icon>vpn_key</mat-icon>
                                                <span>Pause client access</span>
                                            </button>
                                            <button mat-menu-item *ngIf="!element.isTemplate">
                                                <mat-icon>settings</mat-icon>
                                                <span>Above in Manage Instance dialog?</span>
                                            </button>
                                            <button mat-menu-item>
                                                <mat-icon>settings</mat-icon>
                                                <span>Manage Organization</span>
                                            </button>

                                            <button mat-menu-item>
                                                <mat-icon>delete</mat-icon>
                                                <span>Delete Organization</span>
                                            </button>
                                        </mat-menu>
                                        <button mat-button [matMenuTriggerFor]="envActions">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>

                                    </td>
                                    <td mat-footer-cell *matFooterCellDef></td>
                                </ng-container>

                                <!-- ROWS -->
                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"
                                    class="md-elevation-z5"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                                <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
                            </table>
                        </div>

                    </div>
                </div>

                <!--====================================== 
                    ORGS ACCORDION 
                ==========================================-->

                <div *ngIf="envUI === 'twoAccordions'" class="mt-3 mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3>Podio Organizations</h3>

                        <!-- ACTION BTN AND MENU  -->
                        <mat-menu #OrgAndInstanceMenu="matMenu">
                            <button mat-menu-item (click)="onAddEnvClick()">
                                <mat-icon>add_box</mat-icon>
                                <span>Add Organization</span>
                            </button>
                        </mat-menu>
                        <button mat-raised-button [matMenuTriggerFor]="OrgAndInstanceMenu">
                            <mat-icon>add_box</mat-icon>
                        </button>
                    </div>
                    <div>
                        <!-- NO FILTER -->

                        <!-- ACCORDION  -->
                        <app-podio-assets [accordionOnly]='true'></app-podio-assets>

                    </div>
                </div>

                <!--====================================== 
                    INSTANCES ACCORDION 
                ==========================================-->

                <div *ngIf="envUI === 'twoAccordions'" class="mt-3 mb-5">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3>Deployed Solution Instances</h3>

                        <!-- ACTION BTN AND MENU  -->
                        <mat-menu #OrgAndInstanceMenu="matMenu">
                            <button mat-menu-item (click)="onAddEnvClick()">
                                <mat-icon>add_box</mat-icon>
                                <span>Deploy New Solution Instance</span>
                            </button>
                        </mat-menu>
                        <button mat-raised-button [matMenuTriggerFor]="OrgAndInstanceMenu">
                            <mat-icon>add_box</mat-icon>
                        </button>
                    </div>
                    <div>
                        <!-- NO FILTER -->

                        <!-- ACCORDION  -->
                        <app-podio-assets [accordionOnly]='true'></app-podio-assets>

                    </div>
                </div>

            </mat-list>

        </mat-card-content>
    </mat-card>

</div>