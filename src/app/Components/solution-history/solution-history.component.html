<div *ngIf="tasks.length > 3" class="d-flex justify-content-between align-items-center">
    <!-- FILTER -->
    <mat-form-field class="w-50">
        <mat-icon matPrefix>search</mat-icon>
        <input matInput (keyup)="applyFilter($event.target.value)">
    </mat-form-field>

</div>

<div>
    <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>

        <ng-container matColumnDef="task">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                task
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element.task }}
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="instance">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Instance
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element.instance }}
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="version">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Version
            </th>
            <td mat-cell *matCellDef="let element">
                <span *ngIf="element.versionNumFrom">
                    <span class='text-light'></span>
                    {{element.versionNumFrom}}
                    <span class='text-light'> {{element.versionNameFrom}} to&nbsp;</span>
                </span>
                <span>
                    {{ element.versionNumTo }}
                    <span class="text-light"> {{element.versionNameTo}}</span>
                </span>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Status
            </th>
            <td mat-cell *matCellDef="let element">
                <!-- <span class='pl-2 pr-2 b-radius-default' [ngClass]="{'bg-success':element.status === 'success'}">{{ element.status }}</span> -->

                <!-- COMBINED STATUS & DATETIME COLUMNS  -->

                <span *ngIf="element.status === 'success'">
                    <mat-icon class='success mr-1 icon-smaller'>
                        check_circle
                    </mat-icon>
                    <span class='w-125px'>complete at: </span>
                    <span>{{element.completedAt | date:'short'}}</span>
                </span>

                <span *ngIf="element.status === 'error'">
                    <mat-icon class='warning mr-1 icon-smaller'>
                        warning
                    </mat-icon>
                    <span class='w-125px'>failed at: </span>
                    <span>{{element.faultedAt | date:'short'}}</span>
                </span>

                <span *ngIf="element.status === 'in progress'">
                    <mat-icon class='scheduled spin mr-1 icon-smaller'>
                        sync
                    </mat-icon>
                    <span class='w-125px'>started at: </span>
                    <span>{{element.startedAt | date:'short'}}</span>
                </span>

                <span *ngIf="element.status === 'scheduled'">
                    <mat-icon class='scheduled mr-1 icon-smaller'>
                        schedule
                    </mat-icon>
                    <span class='w-125px'>scheduled for: </span>
                    <span>{{element.scheduledFor | date:'short'}}</span>
                </span>

                <!-- SEPARATE STATUS COLUMN CONTENTS -->
                <!-- <mat-icon *ngIf="element.status === 'success'" class='success mr-1 icon-smaller'>check_circle</mat-icon>
                <mat-icon *ngIf="element.status === 'error'" class='warning mr-1 icon-smaller'>warning</mat-icon>
                <mat-icon *ngIf="element.status === 'scheduled'" class='scheduled mr-1 icon-smaller'>schedule</mat-icon>
                <mat-icon *ngIf="element.status === 'in progress'" class='scheduled mr-1 spin icon-smaller'>sync
                </mat-icon>
                <span>{{ element.status }}</span> -->

            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="notes">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Notes
            </th>
            <td mat-cell *matCellDef="let element" class="pr-2 overflow-ellipsis" matTooltip="{{element.notes}}">
                <span class='hidden-sm-down'>
                    {{ element.notes }}
                </span>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <!-- SEPARATE DATETIME COLUMN  -->
        <!-- <ng-container matColumnDef="datetime">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Date
            </th>
            <td mat-cell *matCellDef="let element">
                <span *ngIf="element.faultedAt">
                    <span class="w-125px d-inline-block">{{element.faultedAt | date:'short'}}</span>
                    <span class='text-light'> (failed)</span>
                </span>
                <span *ngIf="!element.faultedAt && element.completedAt">
                    <span class="w-125px d-inline-block">{{element.completedAt | date:'short'}}</span>
                    <span class='text-light'> (completed)</span>
                </span>
                <span *ngIf="!element.completedAt && !element.faultedAt && element.startedAt">
                    <span class="w-125px d-inline-block">{{element.startedAt | date:'short'}}</span>
                    <span class='text-light'> (started)</span>
                </span>
                <span *ngIf="!element.startedAt && element.scheduledFor">
                    <span class="w-125px d-inline-block">{{element.scheduledFor | date:'short'}}</span>
                    <span class='text-light'> (scheduled for) </span>
                </span>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
        </ng-container> -->

        <!-- ROW DEFINITIONS -->
        <tbody>
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true" class="md-elevation-z5"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </tbody>

    </table>

    <mat-paginator [pageSizeOptions]="[10, 20, 100]" showFirstLastButtons></mat-paginator>

</div>