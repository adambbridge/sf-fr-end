<h3 class="text-h1">{{ solution.name }}</h3>

<mat-tab-group>

    <!-- ABOUT -->
    <mat-tab label="About">
        <ng-template matTabContent>

            <div class="row mt-4">

                <div class="col-12 col-sm-6 col-md-4">
                    <mat-card class='mr-1 mb-4'>
                        <mat-card-content>
                            <mat-card-title>Solution description</mat-card-title>
                            <p class="text-hint">
                                This can be a user created description for this solution. It can be edited at any time
                                as
                                the solution evolves.
                            </p>

                        </mat-card-content>
                    </mat-card>
                </div>

                <div class="col-12 col-sm-6 col-md-4">
                    <mat-card class='mr-1 mb-4'>
                        <mat-card-content>
                            <mat-card-title>Add an icon</mat-card-title>
                            <p class="text-hint">
                                Personalize your solution with an icon.
                            </p>
                            <input type="file">

                        </mat-card-content>
                    </mat-card>
                </div>

            </div>

        </ng-template>

    </mat-tab>

    <!-- WORKSPACES  -->
    <mat-tab label="Workspaces">
        <!-- tab content in ng-templates are lazy loaded -->
        <ng-template matTabContent>
            <!-- TODO replace with reusable spaces template 
            pass it the solution via @Input
            also use it to show spaces under an org
            in podio assets component. -->

            <p class="text-hint">
                Some help text can be here.
                <a href="">Learn more <mat-icon class="text-small">open_in_new</mat-icon></a>
            </p>

            <mat-accordion>
                <mat-expansion-panel *ngFor="let space of solution.workspaces" (opened)="panelOpenState = true"
                    (closed)="panelOpenState = false">
                    <mat-expansion-panel-header>
                        <mat-panel-title>{{ space.workspaceName }}</mat-panel-title>
                        <mat-panel-description>
                            Applications: {{ space.podioSpace.applications.length }}
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <mat-list dense>
                        <mat-list-item>ID: {{ space.workspaceId }}</mat-list-item>
                        <mat-list-item>Owner: {{ space.podioSpace.owner }}</mat-list-item>
                        <mat-list-item>
                            Created: {{ space.podioSpace.created_on }}
                        </mat-list-item>
                        <mat-list-item>
                            <h4 mat-line>Description:</h4>
                            <p mat-line>{{ space.description }}</p>
                        </mat-list-item>
                        <mat-list-item>
                            <h4 mat-line>Applications:</h4>
                            <p mat-line>
                                <span *ngFor="let app of space.podioSpace.applications" class="pr-2">
                                    {{ app }}
                                </span>
                            </p>
                        </mat-list-item>
                    </mat-list>
                </mat-expansion-panel>
            </mat-accordion>
        </ng-template>
    </mat-tab>

    <!-- TASKS TAB -->
    <mat-tab label="Tasks">
        <ng-template matTabContent>

            <!-- HELP TEXT -->
            <!-- <p class="text-hint">
                Some help text for performing tasks can be here.
                <a href="">Learn more <mat-icon class="text-small">open_in_new</mat-icon></a>
            </p> -->

            <!-- TASK CARDS -->
            <div class="row mt-4">

                <div class="col-12 col-sm-6 col-md-4">
                    <mat-card class='mr-1 mb-4 cursor-pointer' (click)='onUpdateClick()'>
                        <mat-card-title>Update Solution</mat-card-title>
                        <mat-card-content>
                            <p class='text-hint'>
                                When you have made updates to the Podio workspaces which this solution is based on, an
                                Update can capture those
                                changes and update your Saasafras solution.
                                <a href="">Learn more <mat-icon class="text-small">open_in_new</mat-icon></a>
                            </p>
                        </mat-card-content>
                        <mat-card-actions>
                            <button mat-button>Make an Update...</button>
                        </mat-card-actions>
                    </mat-card>
                </div>

                <div class="col-12 col-sm-6 col-md-4">
                    <mat-card class='mr-1 cursor-pointer' (click)='onDeploymentClick()'>
                        <mat-card-title>New Deployment</mat-card-title>
                        <mat-card-content>
                            <p class='text-hint'>
                                When you have created a Saasafras Solution, you can deploy the Solution to one or more
                                of your clients. This will ...
                                add further explanation...
                                <a href="">Learn more <mat-icon class="text-small">open_in_new</mat-icon></a>
                            </p>
                        </mat-card-content>
                        <mat-card-actions>
                            <button mat-button>Create New Deployment...</button>
                        </mat-card-actions>
                    </mat-card>
                </div>

                <div class="col-12 col-sm-6 col-md-4">
                    <mat-card class='mr-1 cursor-pointer' (click)='onPatchClick()'>
                        <mat-card-title>Patch Deployments</mat-card-title>
                        <mat-card-content>
                            <p class='text-hint'>
                                When you have run Updates on your Saasafras solution you can Update deployments of the
                                solution with all of the changes
                                by creating a Patch.
                                <a href="">Learn more <mat-icon class="text-small">open_in_new</mat-icon></a>
                            </p>
                        </mat-card-content>
                        <mat-card-actions>
                            <button mat-button>Create a Patch...</button>
                        </mat-card-actions>
                    </mat-card>
                </div>

            </div>

            <div class='mt-4'>

                <mat-card class='card-table-container mat-elevation-z3'>

                    <mat-card-title class="pl-4">Task History</mat-card-title>

                    <div class="d-flex justify-content-between align-items-center">
                        <!-- FILTER -->
                        <mat-form-field class="w-50">
                            <mat-icon matPrefix>search</mat-icon>
                            <input matInput (keyup)="applyFilter($event.target.value)">
                        </mat-form-field>

                    </div>

                    <div class="table-container mat-elevation-z4">
                        <table mat-table [dataSource]="dataSource" matSort multiTemplateDataRows>
                            <!-- CELL DEFINITIONS GROUPED BY COLUMN -->

                            <!-- NAME COLUMN -->
                            <!-- coldef=name, 
                            sort directive
                            headerr-cell styling
                            el obj property corresponding to column -->
                            <ng-container matColumnDef="date">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Date
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.date }}
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <!-- VERSION COLUMN -->
                            <ng-container matColumnDef="task">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Task
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.task }}
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <!-- SPACES COLUMN -->
                            <ng-container matColumnDef="environment">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Environment
                                </th>
                                <td mat-cell *matCellDef="let element">
                                    {{ element.environment }}
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <!-- CREATED COLUMN -->
                            <ng-container matColumnDef="description">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                                    Description
                                </th>
                                <!-- show description medium and up else show icon -->
                                <td mat-cell *matCellDef="let element">
                                    <span class='hidden-sm-down'>{{ element.description }}</span>
                                    <span class="hidden-md-up">
                                        <mat-icon aria-hidden="false" aria-label="Example home icon">more_vert
                                        </mat-icon>
                                    </span>
                                </td>
                                <td mat-footer-cell *matFooterCellDef></td>
                            </ng-container>

                            <!-- ROW DEFINITIONS -->
                            <tbody>

                                <!-- search row?? -->

                                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"
                                    class="md-elevation-z5"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                                <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>

                                <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
                            </tbody>
                        </table>
                    </div>

                </mat-card>

            </div>

        </ng-template>

    </mat-tab>

</mat-tab-group>