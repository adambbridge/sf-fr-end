<div class="d-flex justify-content-center">
    <mat-card class='w-75 mt-3'>
        <mat-card-content>
            <h3>Create New Solution</h3>

            <form [formGroup]="newSolutionForm" (ngSubmit)="onSubmit()" novalidate>

                <mat-form-field class="w-100" appearance="">
                    <!-- Defining a name attribute is a requirement when using [(ngModel)] in combination with a form. and the name is used to register eacch control -->
                    <!-- <mat-label>Name</mat-label> -->
                    <input type='text' formControlName="name" matInput required placeholder="Name" />
                </mat-form-field>

                <mat-form-field class="w-100" appearance="">
                    <textarea formControlName="description" matInput placeholder="Description" required></textarea>
                </mat-form-field>

                <mat-form-field class="w-100" appearance="">
                    <mat-label>Use spaces from what organization?</mat-label>
                    <mat-select formControlName="organization" required (selectionChange)='onOrgSelection($event)'>
                        <mat-option *ngFor="let org of organizations" [value]="org.name">
                            {{org.name}}
                        </mat-option>
                    </mat-select>
                    <!-- TODO ADD VALIDATION
                    <div *ngIf="c.invalid && (c.dirty || c.touched)">
                        <mat-error *ngIf="c.errors.required">Please select a client</mat-error>
                    </div> -->
                </mat-form-field>

                <div *ngIf="workspaces" class='mb-3'>

                    <mat-label>Which workspaces?</mat-label>
                    <div class="mt-3">
                        <div *ngFor="let control of workspaceControls.controls; let i = index" class="pb-2">
                            <mat-checkbox type="checkbox" [formControl]="control" id="checkbox{{i}}"
                                (change)="syncItemsWithControls()">
                                {{workspaces[i].workspaceName}}</mat-checkbox>
                        </div>
                    </div>

                    <small *ngIf="selectedWorkspacesError && description.touched">Please select at least one
                        environment</small>
                </div>

                <button type="submit" mat-raised-button *ngIf="!submitted" [disabled]="!newSolutionForm.valid">Create Solution</button>

                <div class="mt-4 mb-4" *ngIf="submitted">
                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                </div>

            </form>

        </mat-card-content>
    </mat-card>

</div>

<!-- <div *ngIf="workspaces">
                    <div *ngFor='let space of workspaces; let i = index' class='d-block mb-3'>
                        <mat-checkbox [(ngModel)]='workspaces[i].name' name="{workspaces[i].name}">
                            {{space.workspaceName}}
                        </mat-checkbox>
                    </div>
                </div> -->